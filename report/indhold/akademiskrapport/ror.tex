\chapter{Ruby on Rails}
\label{akademiskror}

Ruby on Rails er et framework for programmeringssproget Ruby til udvikling af webapplikationer, som vi har benyttet i dette projekt til at implementere {\Foodl}.

Vi traf valget om at arbejde med Ruby on Rails på baggrund af overvejelser omkring hvilket sprog, der ville være nemmeste at implementere systemet med, og hvad vi ville lære mest af. Vi ønskede at udvikle vores kompetencer mht. programmering og webudvikling ved at vælge et sprog, som vi ikke var fuldt bekendte med. 

Vi overvejede følgende programmeringssprog og frameworks:

\begin{itemize}[noitemsep]
\item PHP med CakePHP
\item C\# med ASP.NET MVC
\item Ruby med Ruby on Rails
\end{itemize}

PHP er anerkendt som et programmeringssprog for webudvikling, men Ruby er mere brugervenligt, og Ruby er nemmere at sætte sig ind i forhold til PHP. Dette er vigtigt, da hver mand i gruppen har forskellige kompetencer. I forrige semester blev vi oplært og udarbejdede et system i C\#, men vi valgte at gå videre med Ruby i stedet, fordi vi ønsker at blive bekendte i et nyt programmeringssprog.

Det tager selvfølgelig ekstra tid at skulle sætte sig ind i nye sprog, når man samtidig har nogle overordnede mål, for et projekt, man skal opnå inden en deadline. Ud over programmeringssproget Ruby, så var der mange essentieller sprog til webudvikling (HTML, CSS, JavaScript og MySQL), hvor mange af gruppemedlemmernes kompentenceniveau ikke var særlig højt. For at mindske oplæringstiden og undgå begynderfejl benyttede vi parprogrammering i starten, hvor vi kombinerede gruppemedlemmer med et godt kendskab til sprogene sammen med gruppemedlemmer med et dårligt kendskab til sprogene. På denne måde kunne vi samarbejde med hinanden og få hjælp, hvis der var tvivl om noget. Dette var en rigtig god metode, der gjorde det muligt for os at arbejde mere effektivt, da vi hurtigt kunne spørge hinanden om hjælp.

Ruby on Rails benytter `konvention over konfiguration' til lynhurtigt at oprette et fungerende system. Det fik Ruby on Rails til at virke ``magisk'', hvilket var både positivt og negativt. På den ene side var det hurtigt at få et fungerende system, på den anden side var det til tider svært præcist at vide, hvad der foregik. Det tog derfor længere tid at lære Rails at kende end forventet, fordi vi var nødt til at sætte os ind i de forskellige konventioner. Konventionerne kan se ud til at virke på ``magisk'' vis, hvis man ikke vidste, hvad der foregik i koden.
Rails' fokus på MVC passede til gengæld godt med vores design, og efter vi havde lært de grundlæggende principper, så hjalp det til at gøre det lettere at implementere vores system.

Tager vi i betragtning, at vi arbejdede med et fremmede programmeringssprog, så kan vi konstatere, at det ikke havde nogen negativ effekt på vores arbejde med systemet. Dette kan måske skyldes, at vi arbejdede sammen i par, hvor den mindre erfarne programmør fik lov til at programmere, mens den mere erfarne kunne hjælpe og dirigere den mindre erfarne, hvis man var ved at skrive noget forkert.

Under udviklingen af systemet oplevede vi stabilitets- og ydelsesproblemer med Rails. Vores server havde kun 1GB RAM, og efter et par dage stoppede Rails med at fungere, fordi der ikke var mere hukommelse tilbage. Vi blev nødt til periodisk at genstarte Rails for at undgå, at systemet gik ned, mens vi ikke holdt øje med det.

Rails køres enten i `developement mode' eller `production mode', hvor den første tillader, at man let kan ændre i kodefilerne og se ændringerne med det samme, hvor `production mode' er beregnet til et færdigudviklet system, hvor man ikke har brug for ofte at ændre kodefilerne. En af forskellene er, at alle JavaScript- og CSS-filer bliver kombineret til en enkelt JavaScript-fil og en CSS-fil i `production mode', hvilket ikke sker i `development mode'. For at øge organiseringen af vores kode og for at mindske konflikter i forbindelse med vores system til revisionskontrol, så var vores kode delt op i mange filer. Da alle filer skal overføres individuelt, hver gang man tilgår en side, blev systemet langsomt i `development mode'.

Et andet ydelsesproblem var i forbindelse med databasen. Mens vi udviklede på systemet på vores egne computere, valgte vi at tilgå databasen på serveren i stedet for at bruge en lokal kopi på vores egne computere. Vi valgte at gøre det på denne måde for at være sikre på, at alle arbejdede på de samme data. Vi oplevede, at systemet kørte meget langsommere på vores egne computere, da systemet i så fald skulle forbinde til en server, der ikke var lokal. Problemet var specielt omfattende på søgeresultatsiden, der udførte mange SQL-forespørgsler. Når hver forespørgsel skulle sendes over internettet, tog det cirka 150 millisekunder at udføre hver forespørgsel.

På søgeresultatsiden blev der udført så mange forespørgsler, at det tog næsten 1,5 minut for siden at blive genereret og yderligere et halvt minut for at indlæse alle JavaScript- og CSS-filerne. Dette betød, at udviklingen af netop den side tog længere tid, da man skulle vente 2 minutter for at se effekten af hver eneste lille ændring man lavede. Dette var specielt problematisk i forhold til det visuelle design, da man ofte justerer størrelser, farver og lignende, og hele tiden skal evaluere forskellen. Selvom det ikke var nær det samme problem på serveren, da den kunne tilgå databasen direkte, tydeliggjorde det, at måden, hvorpå vi tilgik data i databasen, var et problem. Dette problem fik vi senere fik rettet, så det blev mere effektivt.

I fremtiden vil vi have en lokal kopi af databasen på vores computere og tilgå denne i stedet. På trods af at vi fandt og rettede ydelsesproblemet, så påvirkede det vores produktivitet meget. Yderligere giver det også den fordel, at vi kan arbejde på systemet uden at være forbundet til internettet, så man \fx kan arbejde på systemet, mens man sidder i toget.

Selvom situationen blev bedre efter, at serveren blev sat til at køre i 'production mode', har det efterladt os kritiske over, hvorvidt Rails kan benyttes i et system, hvor effektivitet er meget vigtigt.

Ser vi på det store billede, så var udbyttet af at arbejde med Ruby on Rails i forhold til de problemer, som vi oplevede ved brugen af Rails, meget godt. Der var nogle problemer, men vi fik så meget ud af Rails, at vi stadig er glade for Rails. Dette betyder, at vi gerne vil benytte Rails i fremtiden for webudvikling. Men ønsket om at lære alternative programmeringssprog vejer tungt og kan resultere i valget af et andet system.
