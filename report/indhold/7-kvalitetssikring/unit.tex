\section{Unittests}
\label{sec:unittests}
For at verificere at programmet opfører sig som vi ønsker, har vi benyttet RSpec, som er et Ruby framework, der først og fremmest er minded mod ``behaviour-driven development'', men også kan bruges til at skrive unittests med. Vi har unittestet bruger-modellen, fordi den er central for systemet, og den er i direkte kontakt med brugeren. Derudover har vi også unittestet enkelte forespørgelser, nemlig log-in-forespørgelsen og log-ud-forespørgelsen. Vi har ikke foretaget unittest af hele systemet, hvilket er grundet nød af resurser, og idet pålidligheds kriteriet, specificeret i \chapref{chap:design}, er blevet vurderet som ``mindre vigtigt'', har vi valgt at nedprioritere det. Eksempler på nogle af de unittests vi har foretaget på bruger-modellen, ved hjælp af RSpec, ses i \lstref{lst:password} og \lstref{lst:email}.

\begin{lstlisting}[caption={Et eksempel på unittesting af, om brugeren har indtastet et password, når han/hun opretter sig som bruger},label=lst:password,language=Ruby]
describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " "}
    it {should_not be_valid}
end
\end{lstlisting}

\begin{lstlisting}[caption={Et eksempel på unittesting af, om en brugers email er valid, når han/hun opretter sig som bruger},label=lst:email,language=Ruby]
describe "when email format is invalid" do
	it "should be invalid" do
    	addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                 	 foo@bar_baz.com foo@bar+baz.com]
    	addresses.each do |invalid_address|
    		@user.email = invalid_address
        	@user.should_not be_valid
    	end
    end
end
\end{lstlisting}

\subsection{Metode til at finde lighed mellem tekststrenge}
Vi benyttede en ret simpel fremgangsmåde til at unitteste funktionen \methodref{CompareStrings}, der tester ligheden mellem to tekststrenge. Vi unittestede denne funktion i Ruby, ved at initialisere et array som vist i \lstref{lst:testcases}.

\begin{lstlisting}[caption={Et eksempel på en række testcases til brug ved unittesting.},label=lst:testcases,language=Ruby]
test_cases = [
  ["aa12345", "aa67890", "aa"],
  ["aa12345", "678aa90", "aa"],
  ["aa12345", "67890aa", "aa"]
]
\end{lstlisting}

I arrayet \texttt{test\_cases}, består hvert element af et array, hvor hvert element i nævnte rækkefølge er: [input1, input2, forventet returværdi].
For hvert element i arrayet, blev det testet om \methodref{CompareStrings(input1, inpu2)} returnerede den forventede værdi. Eksemplet er kun et udpluk af 26 test-cases, der fremgår af kildekoden.
